exclude: ^(build/|dist/|generated/|node_modules/|\.nx/)

repos:
  - repo: https://github.com/pre-commit/pre-commit-hooks
    rev: v4.6.0
    hooks:
      - id: check-yaml
      - id: check-json
        exclude: ^(apps/control-point/frontend/requirements_allocation\.generated\.json|\.nx/)
      - id: end-of-file-fixer
      - id: trailing-whitespace
      - id: detect-private-key

  - repo: https://github.com/astral-sh/ruff-pre-commit
    rev: v0.6.9
    hooks:
      - id: ruff-format
      - id: ruff

  - repo: https://github.com/RobertCraigie/pyright-python
    rev: v1.1.392
    hooks:
      - id: pyright
        args: ["--project", "pyrightconfig.json"]
        additional_dependencies:
          - fastapi
          - pydantic
          - httpx
          - requests
          - pyyaml
          - python-dotenv

  - repo: https://github.com/biomejs/pre-commit
    rev: v0.6.1
    hooks:
      - id: biome-check
        additional_dependencies: ["@biomejs/biome@1.9.4"]

  - repo: https://github.com/DavidAnson/markdownlint-cli2
    rev: v0.15.0
    hooks:
      - id: markdownlint-cli2
        args: ["--config", ".markdownlint.json"]
        exclude: ^(build/|dist/|generated/|node_modules/|\.nx/)

  - repo: local
    hooks:
      - id: architecture-import-check
        name: Architecture Import Check
        entry: python scripts/arch/import_check.py
        language: system
        types: [python]

      - id: architecture-path-check
        name: Architecture Path Check
        entry: python scripts/arch/path_check.py
        language: system
        types: [python]

      - id: frontend-import-check
        name: Frontend Architecture Check
        entry: node scripts/arch/frontend_import_check.js
        language: system
        files: ^apps/frontend/

      - id: shared-ts-import-check
        name: Shared TS Architecture Check
        entry: node scripts/arch/shared_ts_import_check.js
        language: system
        files: ^libs/shared-ts/

      - id: ui-composition-check
        name: UI Composition Check
        entry: node scripts/arch/ui_composition_check.js
        language: system
        files: ^apps/frontend/src/
